---
- name: Configure Ansible defaults
  hosts: all
  become: yes  # Um als Root zu handeln

  tasks:
    - name: Ensure /etc/ansible directory exists
      file:
        path: /etc/ansible
        state: directory
        owner: root
        group: root
        mode: '0755'

    - name: Create ansible.cfg file
      copy:
        content: |
          [defaults]
          become = True
          become_method = sudo
          become_user = root
        dest: /etc/ansible/ansible.cfg
      become: yes  # Um als Root zu handeln

    - name: Show ansible.cfg content
      command: cat /etc/ansible/ansible.cfg
      register: ansible_cfg_content

    - name: Display ansible.cfg content
      debug:
        msg: "{{ ansible_cfg_content.stdout }}"

